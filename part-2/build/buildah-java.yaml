apiVersion: build.knative.dev/v1alpha1
kind: Build
metadata:
  name: greeter-buildah-build
  labels:
    app: greeter
spec:
  serviceAccountName: builder
  source:
    git:
      url: https://github.com/kameshsampath/knative-serving-blogs
      revision: master
  template:
    name: java-buildah
    arguments:
      - name: IMAGE_NAME
        value: "greeter:0.0.1"
      - name: CONTEXT_DIR
        value: "part-2/java"
      - name: JAVA_APP_NAME
        value: "greeter.jar"
      - name: CACHE
        value: m2-cache
  volumes:
    - name: m2-cache
      persistentVolumeClaim:
        claimName: m2-cache
